# ğŸ SMART HIVE - MODELO NOSQL COMPLETO

## ğŸ“Š MODELO CONCEITUAL



---

## ğŸ”§ MODELO LÃ“GICO DETALHADO

### ğŸ“ COLEÃ‡ÃƒO: apiarios
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ“ APIARIOS                           â”‚
â”‚                (DOCUMENTO RAIZ)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ†” _id: ObjectId                      [CHAVE PRIMÃRIA] â”‚
â”‚  ğŸ”¢ id: Number                         [ÃšNICO, INDEXADO]â”‚
â”‚  ğŸ“› nome: String                                        â”‚
â”‚  ğŸ“ localizacao: String                                 â”‚
â”‚  ğŸ‘¤ responsavel: String                                 â”‚
â”‚  ğŸ“ descricao: String                                   â”‚
â”‚  ğŸ“… data_criacao: Date                                  â”‚
â”‚  ğŸ·ï¸ status: String                   [Ativo, Inativo]   â”‚
â”‚                                                         â”‚
â”‚  ğŸ—ºï¸ coordenadas: Object              [SUBDOCUMENTO]     â”‚
â”‚     â”œâ”€â”€ ğŸŒ lat: Double                                  â”‚
â”‚     â””â”€â”€ ğŸŒ lng: Double                                  â”‚
â”‚                                                         â”‚
â”‚  ğŸ colmeias: Array[Object]          [EMBEDDED]         â”‚
â”‚     â”œâ”€â”€ ğŸ”¢ id: Number                [ÃšNICO]            â”‚
â”‚     â”œâ”€â”€ ğŸ“› nome: String                                 â”‚
â”‚     â”œâ”€â”€ ğŸ“ localizacao: String                          â”‚
â”‚     â”œâ”€â”€ ğŸ·ï¸ status: String            [Ativa, ManutenÃ§Ã£o]â”‚
â”‚     â”œâ”€â”€ ğŸ especie: String                              â”‚
â”‚     â”œâ”€â”€ ğŸ“… data_instalacao: Date                        â”‚
â”‚     â”‚                                                  â”‚
â”‚     â”œâ”€â”€ ğŸ“Š monitoramentos: Array[Object] [EMBEDDED]     â”‚
â”‚     â”‚   â”œâ”€â”€ ğŸ”¢ id: Number                               â”‚
â”‚     â”‚   â”œâ”€â”€ ğŸ“… data_hora: Date                          â”‚
â”‚     â”‚   â”œâ”€â”€ ğŸ”¢ numero_abelhas: Number                   â”‚
â”‚     â”‚   â”œâ”€â”€ ğŸŒ¡ï¸ temperatura: Double                      â”‚
â”‚     â”‚   â”œâ”€â”€ ğŸ’§ umidade: Double                          â”‚
â”‚     â”‚   â”œâ”€â”€ â˜€ï¸ clima: String                            â”‚
â”‚     â”‚   â”œâ”€â”€ âš ï¸ situacao: String       [Normal, Alerta]  â”‚
â”‚     â”‚   â””â”€â”€ ğŸ“ observacoes: String                      â”‚
â”‚     â”‚                                                  â”‚
â”‚     â””â”€â”€ ğŸš¨ alertas: Array[Object]     [EMBEDDED]        â”‚
â”‚         â”œâ”€â”€ ğŸ”¢ id: Number                               â”‚
â”‚         â”œâ”€â”€ ğŸ“… data_hora: Date                          â”‚
â”‚         â”œâ”€â”€ ğŸ“ descricao_alerta: String                 â”‚
â”‚         â”œâ”€â”€ ğŸ·ï¸ tipo: String                             â”‚
â”‚         â”œâ”€â”€ âš ï¸ nivel: String          [Baixo, MÃ©dio, Alto]â”‚
â”‚         â”œâ”€â”€ âœ… resolvido: Boolean                       â”‚
â”‚         â””â”€â”€ ğŸ“… data_resolucao: Date                     â”‚
â”‚                                                         â”‚
â”‚  ğŸ“ˆ estatisticas: Object             [DERIVADO]         â”‚
â”‚     â”œâ”€â”€ ğŸ”¢ total_colmeias: Number                       â”‚
â”‚     â”œâ”€â”€ ğŸ”¢ colmeias_ativas: Number                      â”‚
â”‚     â”œâ”€â”€ ğŸ”¢ colmeias_manutencao: Number                  â”‚
â”‚     â””â”€â”€ ğŸ“… ultimo_monitoramento: Date                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ COLEÃ‡ÃƒO: usuarios
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ“ USUÃRIOS                           â”‚
â”‚                (REFERÃŠNCIA)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ†” _id: ObjectId                      [CHAVE PRIMÃRIA] â”‚
â”‚  ğŸ”¢ id: Number                         [ÃšNICO, INDEXADO]â”‚
â”‚  ğŸ‘¤ username: String                   [ÃšNICO, INDEXADO]â”‚
â”‚  ğŸ” password: String                                   â”‚
â”‚  ğŸ‘¤ nome_completo: String                              â”‚
â”‚  ğŸ“§ email: String                                      â”‚
â”‚  ğŸ¯ role: String                    [admin, usuario, tecnico]â”‚
â”‚  ğŸ“… ultimo_login: Date                                 â”‚
â”‚  ğŸ“… data_criacao: Date                                 â”‚
â”‚  âœ… ativo: Boolean                                     â”‚
â”‚                                                         â”‚
â”‚  ğŸ”— apiarios_responsavel: Array[Number] [REFERÃŠNCIAS]  â”‚
â”‚     â””â”€â”€ ğŸ”¢ apiario_id: Number                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ COLEÃ‡ÃƒO: predador_detections
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ğŸ“ PREDADOR_DETECTIONS                    â”‚
â”‚                  (HÃBRIDO)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ†” _id: ObjectId                      [CHAVE PRIMÃRIA] â”‚
â”‚  ğŸ”¢ id: Number                         [ÃšNICO, INDEXADO]â”‚
â”‚  ğŸ”— colmeia_id: Number                 [REFERÃŠNCIA, INDEXADO]â”‚
â”‚  ğŸ”— apiario_id: Number                 [REFERÃŠNCIA, INDEXADO]â”‚
â”‚  ğŸ“… data_hora: Date                    [INDEXADO]       â”‚
â”‚  ğŸ“ descricao: String                                  â”‚
â”‚  ğŸ“¸ evidencias: Array[String]                          â”‚
â”‚  ğŸ› ï¸ acoes_tomadas: String                              â”‚
â”‚  âœ… resolvido: Boolean                                 â”‚
â”‚  ğŸ“… data_resolucao: Date                               â”‚
â”‚  ğŸ”— usuario_registro: Number           [REFERÃŠNCIA]    â”‚
â”‚  ğŸ“… data_registro: Date                               â”‚
â”‚                                                         â”‚
â”‚  ğŸ·ï¸ predator_type: Object             [EMBEDDED]       â”‚
â”‚     â”œâ”€â”€ ğŸ”¢ id: Number                 [REFERÃŠNCIA]     â”‚
â”‚     â”œâ”€â”€ ğŸ“› nome: String                                â”‚
â”‚     â””â”€â”€ âš ï¸ nivel_perigo: String       [Baixo, MÃ©dio, Alto]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ COLEÃ‡ÃƒO: predator_types
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ğŸ“ PREDATOR_TYPES                       â”‚
â”‚                  (CATÃLOGO)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ†” _id: ObjectId                      [CHAVE PRIMÃRIA] â”‚
â”‚  ğŸ”¢ id: Number                         [ÃšNICO, INDEXADO]â”‚
â”‚  ğŸ“› nome: String                                        â”‚
â”‚  ğŸ“ descricao: String                                   â”‚
â”‚  âš ï¸ nivel_perigo: String             [Baixo, MÃ©dio, Alto]â”‚
â”‚  ğŸ’¡ recomendacoes: String                               â”‚
â”‚  ğŸ“… data_criacao: Date                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ LEGENDA E CONVENÃ‡Ã•ES

### ğŸ”· TIPOS DE DADOS
- ğŸ†” ObjectId: Identificador Ãºnico MongoDB  
- ğŸ”¢ Number: Valores numÃ©ricos  
- ğŸ“› String: Texto e descriÃ§Ãµes  
- ğŸ“… Date: Datas e horÃ¡rios  
- âœ… Boolean: Valores verdadeiro/falso  
- ğŸ”— Array: Listas e coleÃ§Ãµes  
- ğŸ·ï¸ Object: Documentos aninhados  

### ğŸ¯ ESTRATÃ‰GIAS NOSQL
- ğŸŸ¢ **EMBEDDED:** Dados frequentemente acessados juntos  
- ğŸ”µ **REFERÃŠNCIA:** Dados mestres e reutilizÃ¡veis  
- ğŸŸ£ **HÃBRIDO:** CombinaÃ§Ã£o embedded + referÃªncia  
- ğŸ“Š **DERIVADO:** Dados calculados para performance  

### ğŸ“Œ ENUMS E DOMÃNIOS
```
status_apiario: ["Ativo", "Inativo", "ManutenÃ§Ã£o"]
status_colmeia: ["Ativa", "Em manutenÃ§Ã£o", "Inativa"]
role_usuario: ["admin", "usuario", "tecnico"]
situacao_monitoramento: ["Normal", "Alerta", "CrÃ­tico", "Em observaÃ§Ã£o"]
nivel_perigo: ["Baixo", "MÃ©dio", "Alto"]
clima: ["Ensolarado", "Parcialmente nublado", "Nublado", "Chuvoso"]
```

---

## ğŸ”— RELACIONAMENTOS E CARDINALIDADES

### DIAGRAMA DE RELACIONAMENTOS
```
APIÃRIOS (1) â”€â”€â”€â”€ possui â”€â”€â”€â”€â–¶ (N) COLMEIAS
    â”‚                               â”‚
    â”‚ 1                           1 â”‚
    â–¼                               â–¼
USUÃRIOS (N) â—€â”€â”€â”€ gerencia â”€â”€â”€â”€â–¶ (N) APIÃRIOS
    â”‚                               â”‚
    â”‚ N                           1 â”‚
    â–¼                               â–¼
PREDADOR_DETECTIONS (N) â—€â”€â”€â”€ pertence â”€â”€â”€â”€â–¶ (1) COLMEIAS
    â”‚
    â–¼
PREDATOR_TYPES (1) â—€â”€â”€â”€ classifica â”€â”€â”€â”€â–¶ (N) PREDADOR_DETECTIONS
```

---

## ğŸ“‹ MATRIZ DE DECISÃ•ES NOSQL

| Entidade | EstratÃ©gia | Justificativa | Impacto de Performance |
|-----------|-------------|----------------|--------------------------|
| colmeias | Embedded | Dados sempre acessados com apiÃ¡rio | ğŸš€ Muito rÃ¡pida |
| monitoramentos | Embedded | Alta frequÃªncia, vida curta | ğŸš€ Muito rÃ¡pida |
| alertas | Embedded | EspecÃ­ficos por colmeia | ğŸš€ Muito rÃ¡pida |
| usuarios | ReferÃªncia | Dados mestres, reutilizÃ¡veis | âš¡ RÃ¡pida |
| predador_detections | HÃ­brida | RelatÃ³rios cruzados | âš¡ RÃ¡pida |
| predator_types | ReferÃªncia | CatÃ¡logo, poucas alteraÃ§Ãµes | âš¡ RÃ¡pida |

---

## ğŸš€ ÃNDICES RECOMENDADOS

```javascript
// APIARIOS
db.apiarios.createIndex({ "id": 1 }, { unique: true })
db.apiarios.createIndex({ "colmeias.id": 1 })
db.apiarios.createIndex({ "colmeias.status": 1 })
db.apiarios.createIndex({ "colmeias.monitoramentos.data_hora": -1 })

// USUÃRIOS
db.usuarios.createIndex({ "username": 1 }, { unique: true })
db.usuarios.createIndex({ "email": 1 })
db.usuarios.createIndex({ "apiarios_responsavel": 1 })

// PREDADOR_DETECTIONS
db.predador_detections.createIndex({ "colmeia_id": 1 })
db.predador_detections.createIndex({ "resolvido": 1 })
db.predador_detections.createIndex({ "data_hora": -1 })
```
